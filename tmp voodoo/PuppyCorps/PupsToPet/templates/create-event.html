{% extends "base_generic.html" %}
{% load static %}

{% block title %}<title>PupsToPet | Create Event</title>{% endblock %}

{% block navbar %}
<a href="{% url 'logout' %}?next={% url 'about' %}">
    <button>
        &#x1F43E; Log Out &#x1F43E;
    </button>
</a>
<a href="{% url 'userinfo' %}">
    <button>
        &#x1F43E; Account Settings &#x1F43E;
    </button>
</a>
<a href="{% url 'findevent' %}">
    <button>
        &#x1F43E; Find Event &#x1F43E;
    </button>
</a>
<a href="{% url 'dashboard' %}">
    <button>
        &#x1F43E; Dashboard &#x1F43E;
    </button>
</a>
{% endblock %}

{% block content %}
<div id="create-event-page">
	<div class="login-modal" style="height:100%;width:70%">
		<form>
			<div style="float: left; width: 50%">
				<h1>Create Event</h1>
					<h3>Pet:</h3>
					<select>
						<option>tmp 1:犬</option>
						<option>tmp 2:猫</option>
						<option>tmp 3:蛇</option>
					</select>
					<h3>Time (mm/dd/yyyy, hh:mm):</h3>
					<select>
						<option>01</option>
						<option>02</option>
						<option>03</option>
						<option>04</option>
						<option>05</option>
						<option>06</option>
						<option>07</option>
						<option>08</option>
						<option>09</option>
						<option>10</option>
						<option>11</option>
						<option>12</option>
					</select>/<select>
						<option>01</option>
						<option>02</option>
						<option>03</option>
						<option>04</option>
						<option>05</option>
						<option>06</option>
						<option>07</option>
						<option>08</option>
						<option>09</option>
						<option>10</option>
						<option>11</option>
						<option>12</option>
						<option>13</option>
						<option>14</option>
						<option>15</option>
						<option>16</option>
						<option>17</option>
						<option>18</option>
						<option>19</option>
						<option>20</option>
						<option>21</option>
						<option>22</option>
						<option>23</option>
						<option>24</option>
						<option>25</option>
						<option>26</option>
						<option>27</option>
						<option>28</option>
						<option>29</option>
						<option>30</option>
						<option>31</option>
					</select>/<select>
						<option>一年</option>
						<option>二年</option>
						<option>三年</option>
					</select>,
					<select>
						<option>00</option>
						<option>01</option>
						<option>02</option>
						<option>03</option>
						<option>04</option>
						<option>05</option>
						<option>06</option>
						<option>07</option>
						<option>08</option>
						<option>09</option>
						<option>10</option>
						<option>11</option>
						<option>12</option>
						<option>13</option>
						<option>14</option>
						<option>15</option>
						<option>16</option>
						<option>17</option>
						<option>18</option>
						<option>19</option>
						<option>20</option>
						<option>21</option>
						<option>22</option>
						<option>23</option>
					</select>:<select>
						<option>00</option>
						<option>01</option>
						<option>02</option>
						<option>03</option>
						<option>04</option>
						<option>05</option>
						<option>06</option>
						<option>07</option>
						<option>08</option>
						<option>09</option>
						<option>10</option>
						<option>11</option>
						<option>12</option>
						<option>13</option>
						<option>14</option>
						<option>15</option>
						<option>16</option>
						<option>17</option>
						<option>18</option>
						<option>19</option>
						<option>20</option>
						<option>21</option>
						<option>22</option>
						<option>23</option>
						<option>24</option>
						<option>25</option>
						<option>26</option>
						<option>27</option>
						<option>28</option>
						<option>29</option>
						<option>30</option>
						<option>31</option>
						<option>32</option>
						<option>33</option>
						<option>34</option>
						<option>35</option>
						<option>36</option>
						<option>37</option>
						<option>38</option>
						<option>39</option>
						<option>40</option>
						<option>41</option>
						<option>42</option>
						<option>43</option>
						<option>44</option>
						<option>45</option>
						<option>46</option>
						<option>47</option>
						<option>48</option>
						<option>49</option>
						<option>50</option>
						<option>51</option>
						<option>52</option>
						<option>53</option>
						<option>54</option>
						<option>55</option>
						<option>56</option>
						<option>57</option>
						<option>58</option>
						<option>59</option>
					</select>	
				<h3>Location:</h3>
				<input type="text"><br>
				<h3>Coordinates</h3>
				<input id="coords" type="text" name="">
				<input id="query" type="text" name="">
				<button type="button" onclick="getLocation()">Set to current location</button>
			</div>
			<div style="float: right; width: 50%">
				<div id="map"></div>

				<style>
					#map {
						height: 400px;
						width: 350px;
					}
				</style>
				<script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyCQgbR5jdBj36wI9-6SpCOpaBr-Rj14L70"></script>
				<script>
					var mapOptions = {
						zoom: 4,
						zoom: 14,
						center: new google.maps.LatLng(42.391138,-72.526812),
						mapTypeId: 'satellite',
					}
					var map = new google.maps.Map(document.getElementById("map"), mapOptions);
					var marker = new google.maps.Marker({
						position: new google.maps.LatLng(42.391138,-72.526812),
						map: map,
						draggable:true,
						title:"Drag me!",
					});

					google.maps.event.addListener(marker, 'mouseup', function (event) {
						document.getElementById("coords").value = event.latLng.lat() + "," + event.latLng.lng();
					});

					google.maps.event.addListener(marker, 'mousedown', function (event) {
						document.getElementById("coords").value = event.latLng.lat() + "," + event.latLng.lng();
					});

					var input = document.getElementById('query')
					var searchBox = new google.maps.places.SearchBox(input);
					map.addListener('bounds_changed', function() {
						searchBox.setBounds(map.getBounds());
					});
					searchBox.addListener('places_changed', function() {
						var places = searchBox.getPlaces();
						if (places.length == 0) {
							return;
						}
						// For each place, get the icon, name and location.
						// var bounds = new google.maps.LatLngBounds();
						
						marker.setPosition(places[0].geometry.location);
						map.setCenter(places[0].geometry.location);
						document.getElementById("coords").value = places[0].geometry.location.lat() + "," + places[0].geometry.location.lng();

						// map.fitBounds(bounds);
					});

					map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
					var x = document.getElementById("coords");
					function getLocation() {
						if (navigator.geolocation) {
							navigator.geolocation.getCurrentPosition(showPosition);
						} else {
							x.innerHTML = "Geolocation is not supported by this browser.";
						}
					}
					function showPosition(position) {
						x.value = position.coords.latitude + 
						"," + position.coords.longitude; 
					}
						// getLocation();
				</script>
				<br>
			</div>
			<br style="clear: both;">
			<button>Submit</button>
			<!-- <input type="submit"> -->
		</form>
	</div>
</div>
{% endblock %}
